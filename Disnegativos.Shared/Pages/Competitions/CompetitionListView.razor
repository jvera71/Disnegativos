@using Disnegativos.Shared.DTOs
@using Disnegativos.Shared.Resources
@inject IStringLocalizer<SharedResources> L

<RadzenStack Orientation="Orientation.Vertical" Gap="1rem">
    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.SpaceBetween">
        <RadzenText TextStyle="TextStyle.H5" class="rz-m-0">@L["Competitions"]</RadzenText>
        <RadzenButton Icon="add" Text="@L["AddCompetition"]" Click="@OnAdd" ButtonStyle="ButtonStyle.Primary" />
    </RadzenStack>

    <RadzenDataGrid Data="@Data" TItem="CompetitionDto" AllowFiltering="true" AllowSorting="true" AllowPaging="true" PageSize="10" 
                    IsLoading="@IsLoading" EmptyText="@L["NoDataFound"]">
        <Columns>
            <RadzenDataGridColumn TItem="CompetitionDto" Property="Title" Title="@L["Title"]">
                <Template Context="comp">
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                        <div style="width: 12px; height: 12px; border-radius: 50%; background-color: @comp.Color"></div>
                        <span>@comp.Title</span>
                    </RadzenStack>
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="CompetitionDto" Property="SportDisciplineName" Title="@L["Discipline"]" />
            <RadzenDataGridColumn TItem="CompetitionDto" Property="SportCategoryName" Title="@L["Category"]" />
            <RadzenDataGridColumn TItem="CompetitionDto" Property="StartDate" Title="@L["StartDate"]" FormatString="{0:d}" />
            <RadzenDataGridColumn TItem="CompetitionDto" Property="EndDate" Title="@L["EndDate"]" FormatString="{0:d}" />
            <RadzenDataGridColumn TItem="CompetitionDto" Property="IsActive" Title="@L["Active"]" Width="80px" TextAlign="TextAlign.Center">
                <Template Context="comp">
                    <RadzenIcon Icon="@(comp.IsActive ? "check_circle" : "cancel")" 
                                IconColor="@(comp.IsActive ? "var(--rz-success)" : "var(--rz-danger)")" />
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="CompetitionDto" Filterable="false" Sortable="false" TextAlign="TextAlign.Center" Width="100px">
                <Template Context="comp">
                    <RadzenButton Icon="edit" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Small" Click="@(() => OnEdit.InvokeAsync(comp.Id))" />
                    <RadzenButton Icon="delete" ButtonStyle="ButtonStyle.Danger" Size="ButtonSize.Small" class="rz-ml-2" 
                                  Click="@(() => OnDelete.InvokeAsync(comp.Id))" />
                </Template>
            </RadzenDataGridColumn>
        </Columns>
    </RadzenDataGrid>
</RadzenStack>

@code {
    [Parameter] public List<CompetitionDto> Data { get; set; } = [];
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public EventCallback OnAdd { get; set; }
    [Parameter] public EventCallback<Guid> OnEdit { get; set; }
    [Parameter] public EventCallback<Guid> OnDelete { get; set; }
}
